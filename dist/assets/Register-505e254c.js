import{p as M,r as c,k as P,b as n,c as i,e,t as l,s as V,g as u,v as y,q as m,f as v,h as d,x as _,y as z,d as k,w as x,l as N,F as T,m as B}from"./index-fc788e87.js";import{T as j}from"./Toast-e5e43e5f.js";const L={class:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 flex items-center justify-center py-8"},U={class:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md mx-4"},H={class:"text-center mb-8"},S={class:"text-3xl font-bold text-gray-900 mb-2"},A={class:"text-gray-600"},D={class:"block text-sm font-semibold text-gray-700 mb-2"},R={class:"relative"},I=["placeholder"],F={key:0,class:"text-red-500 text-sm mt-1"},q={class:"block text-sm font-semibold text-gray-700 mb-2"},E={class:"relative"},J=["placeholder"],O={key:0,class:"text-red-500 text-sm mt-1"},G={class:"block text-sm font-semibold text-gray-700 mb-2"},K={class:"text-red-500 text-sm"},Q={class:"relative"},W=["placeholder"],X={class:"block text-sm font-semibold text-gray-700 mb-2"},Y={class:"text-red-500 text-sm"},Z={class:"relative"},ee=["placeholder"],te={class:"block text-sm font-semibold text-gray-700 mb-2"},se={class:"relative"},re=["type","placeholder"],oe={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ae={key:0,class:"text-red-500 text-sm mt-1"},ne={class:"block text-sm font-semibold text-gray-700 mb-2"},ie={class:"relative"},de=["type","placeholder"],ue={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pe={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ce={key:0,class:"text-red-500 text-sm mt-1"},me={class:"flex items-start"},ve={class:"mr-2 text-sm text-gray-600"},fe={key:0,class:"text-red-500 text-sm"},ge=["disabled"],he={key:0,class:"flex items-center justify-center"},ye={key:1},be={class:"text-center"},we={class:"text-gray-600"},$e={__name:"Register",setup(ke){const $=M(),r=c({fullName:"",phone:"",email:"",password:"",address:"",confirmPassword:"",acceptTerms:!1,address:""}),o=c({}),f=c(!1),g=c(!1),h=c(!1),p=c({visible:!1,message:"",type:"success"}),b=(s,t="success")=>{p.value={visible:!0,message:s,type:t},setTimeout(()=>p.value.visible=!1,3e3)},C=async()=>{if(o.value={},!r.value.fullName.trim())return o.value.fullName="الاسم الكامل مطلوب";if(!r.value.phone.trim())return o.value.phone="رقم الهاتف مطلوب";if(!r.value.password.trim())return o.value.password="كلمة المرور مطلوبة";if(r.value.password.length<6)return o.value.password="كلمة المرور يجب أن تكون 6 أحرف على الأقل";if(r.value.password!==r.value.confirmPassword)return o.value.confirmPassword="كلمة المرور غير متطابقة";if(!r.value.acceptTerms)return o.value.acceptTerms="يجب الموافقة على الشروط والأحكام";f.value=!0;try{const{data:s}=await B.post("/api/register",{lang:"ar",user_type:"client",first_name:r.value.fullName,phone:r.value.phone,email:r.value.email||"",address:r.value.address||"",password:r.value.password});s.key===1?(localStorage.setItem("user",JSON.stringify(s.data)),localStorage.setItem("token",s.data.api_token),b(s.msg,"success"),setTimeout(()=>{$.push("/")},1500)):b(s.msg||"حدث خطأ ما","error")}catch(s){console.error("Register error:",s),b("فشل الاتصال بالخادم","error")}finally{f.value=!1}};return(s,t)=>{const w=P("router-link");return n(),i(T,null,[e("div",L,[e("div",U,[e("div",H,[e("h1",S,l(s.$t("register.title")),1),e("p",A,l(s.$t("register.subtitle")),1)]),e("form",{onSubmit:V(C,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",D,l(s.$t("register.fullName")),1),e("div",R,[t[10]||(t[10]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.fullName=a),type:"text",placeholder:s.$t("register.fullNamePlaceholder"),class:m(["w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",{"border-red-500":o.value.fullName}])},null,10,I),[[y,r.value.fullName]])]),o.value.fullName?(n(),i("p",F,l(o.value.fullName),1)):v("",!0)]),e("div",null,[e("label",q,l(s.$t("register.phone")),1),e("div",E,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.phone=a),type:"tel",placeholder:s.$t("register.phonePlaceholder"),class:m(["w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",{"border-red-500":o.value.phone}]),style:{direction:"rtl"},onInput:t[2]||(t[2]=a=>r.value.phone=r.value.phone.replace(/\D/g,""))},null,42,J),[[y,r.value.phone]])]),o.value.phone?(n(),i("p",O,l(o.value.phone),1)):v("",!0)]),e("div",null,[e("label",G,[d(l(s.$t("register.email"))+" ",1),e("span",K," ("+l(s.$t("register.optional"))+")",1)]),e("div",Q,[t[12]||(t[12]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.email=a),type:"email",placeholder:s.$t("register.emailPlaceholder"),class:m(["w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",{"border-red-500":o.value.email}])},null,10,W),[[y,r.value.email]])])]),e("div",null,[e("label",X,[d(l(s.$t("register.address"))+" ",1),e("span",Y," ("+l(s.$t("register.optional"))+")",1)]),e("div",Z,[t[13]||(t[13]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.address=a),type:"text",placeholder:s.$t("register.addressPlaceholder"),class:"w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"},null,8,ee),[[y,r.value.address]])])]),e("div",null,[e("label",te,l(s.$t("register.password")),1),e("div",se,[t[16]||(t[16]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.password=a),type:g.value?"text":"password",placeholder:s.$t("register.passwordPlaceholder"),class:m(["w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",{"border-red-500":o.value.password}])},null,10,re),[[_,r.value.password]]),e("button",{type:"button",onClick:t[6]||(t[6]=a=>g.value=!g.value),class:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 hover:text-gray-600"},[g.value?(n(),i("svg",oe,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(n(),i("svg",le,t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)])))])]),o.value.password?(n(),i("p",ae,l(o.value.password),1)):v("",!0)]),e("div",null,[e("label",ne,l(s.$t("register.confirmPassword")),1),e("div",ie,[t[19]||(t[19]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.confirmPassword=a),type:h.value?"text":"password",placeholder:s.$t("register.confirmPasswordPlaceholder"),class:m(["w-full pr-10 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",{"border-red-500":o.value.confirmPassword}])},null,10,de),[[_,r.value.confirmPassword]]),e("button",{type:"button",onClick:t[8]||(t[8]=a=>h.value=!h.value),class:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 hover:text-gray-600"},[h.value?(n(),i("svg",ue,t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(n(),i("svg",pe,t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)])))])]),o.value.confirmPassword?(n(),i("p",ce,l(o.value.confirmPassword),1)):v("",!0)]),e("div",me,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=a=>r.value.acceptTerms=a),class:m(["w-4 h-4 text-primary focus:ring-primary border-gray-300 rounded mt-1",{"border-red-500":o.value.acceptTerms}])},null,2),[[z,r.value.acceptTerms]]),e("label",ve,[d(l(s.$t("register.acceptTerms"))+" ",1),k(w,{to:"/terms",class:"text-primary hover:text-primary-dark"},{default:x(()=>[d(l(s.$t("register.terms")),1)]),_:1}),d(" "+l(s.$t("register.and"))+" ",1),k(w,{to:"/privacy",class:"text-primary hover:text-primary-dark"},{default:x(()=>[d(l(s.$t("register.privacy")),1)]),_:1})])]),o.value.acceptTerms?(n(),i("p",fe,l(o.value.acceptTerms),1)):v("",!0),e("button",{type:"submit",disabled:f.value,class:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 rounded-xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(n(),i("span",he,[t[20]||(t[20]=e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),d(" "+l(s.$t("register.creating")),1)])):(n(),i("span",ye,l(s.$t("register.register")),1))],8,ge),e("div",be,[e("p",we,[d(l(s.$t("register.haveAccount"))+" ",1),k(w,{to:"/login",class:"text-primary hover:text-primary-dark font-semibold"},{default:x(()=>[d(l(s.$t("register.login")),1)]),_:1})])])],32)])]),p.value.visible?(n(),N(j,{key:0,message:p.value.message,type:p.value.type,visible:p.value.visible},null,8,["message","type","visible"])):v("",!0)],64)}}};export{$e as default};
